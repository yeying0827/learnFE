## è¿›é˜¶ç¯‡ï¼šå˜é‡è®¡ç®—

### å˜é‡

**CSSå˜é‡**åˆç§°**CSSè‡ªå®šä¹‰å±æ€§**ï¼ŒæŒ‡å¯åœ¨æ•´ä¸ªæ–‡æ¡£ä¸­é‡å¤ä½¿ç”¨çš„å€¼ã€‚

å®ƒç”±è‡ªå®šä¹‰å±æ€§`--var`ä¸å‡½æ•°`var()`ç»„æˆï¼Œ`var()`ç”¨äºå¼•ç”¨è‡ªå®šä¹‰å±æ€§ã€‚

ä¸€ä¸ªä½¿ç”¨åœºæ™¯ï¼šæ¢è‚¤åŠŸèƒ½ï¼ˆä¸»é¢˜è‰²ï¼‰

æ ¹æ®UIçº¦å®šçš„è§„èŒƒï¼Œå°†éœ€å˜æ¢çš„é¢œè‰²ä½¿ç”¨å˜é‡å®šä¹‰ï¼Œé€šè¿‡`JS`æ‰¹é‡æ“ä½œè¿™äº›å®šä¹‰å¥½çš„å˜é‡å³å¯ï¼Œè¿™ä¹Ÿæ˜¯**é¢œè‰²ä¸»é¢˜åˆ‡æ¢**çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå¥½å¤„åœ¨äºåªéœ€ç»´æŠ¤ä¸€å¥—CSSä»£ç ã€‚

```html
<button id="red-theme-btn">åˆ‡æ¢çº¢è‰²ä¸»é¢˜</button>
<button id="blue-theme-btn">åˆ‡æ¢è“è‰²ä¸»é¢˜</button>
<button id="green-theme-btn">åˆ‡æ¢ç»¿è‰²ä¸»é¢˜</button>
```

```javascript
["red", "blue", "green"].forEach(v => {
  const btn = document.getElementById(`${v}-theme-btn`);
  btn.addEventListener("click", () => document.body.style.setProperty("--bg-color", v));
})
```

`CSS`ä½¿ç”¨å˜é‡æœ‰å¦‚ä¸‹å¥½å¤„ï¼š

* å‡å°‘æ ·å¼ä»£ç çš„é‡å¤æ€§
* å¢åŠ æ ·å¼ä»£ç çš„æ‰©å±•æ€§
* æé«˜æ ·å¼ä»£ç çš„çµæ´»æ€§
* å¢åŠ ä¸€ç§`CSS`ä¸`JS`çš„é€šä¿¡æ–¹å¼
* æ— éœ€æ·±å±‚éå†`DOM`æ”¹å˜æŸä¸ªæ ·å¼

å¯¹æ¯”`SCSSå˜é‡`ä¸`LESSå˜é‡`çš„ä¼˜åŠ¿ï¼š

* æµè§ˆå™¨åŸç”Ÿç‰¹æ€§ï¼Œæ— éœ€ç»è¿‡ä»»ä½•è½¬è¯‘å¯ç›´æ¥è¿è¡Œ
* `DOMå¯¹è±¡`ä¸€å‘˜ï¼Œæå¤§ä¾¿åˆ©`CSS`ä¸`JS`é—´çš„è”ç³»



### è®¤è¯†

å˜é‡çš„è§„èŒƒä¸ç”¨æ³•ã€‚[ã€ŠCSSå˜é‡æ•™ç¨‹ã€‹](http://www.ruanyifeng.com/blog/2017/05/css-variables.html)

å¯¹å˜é‡ç»†èŠ‚çš„æ•´ç†ï¼š

* å£°æ˜ï¼š`--å˜é‡å`
* è¯»å–ï¼š`var(--å˜é‡å[, é»˜è®¤å€¼])`
* ç±»å‹
  * æ™®é€šï¼šåªèƒ½ç”¨ä½œ`å±æ€§å€¼`ä¸èƒ½ç”¨ä½œ`å±æ€§å`
  * å­—ç¬¦ï¼šä¸å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œ`"Hello, "var(--name)`
  * æ•°å€¼ï¼šä½¿ç”¨`calc()`ä¸æ•°å€¼å•ä½è¿ç”¨ï¼Œ`var(--width) * 10px`
* ä½œç”¨åŸŸ
  * èŒƒå›´ï¼šåœ¨`å½“å‰èŠ‚ç‚¹å—ä½œç”¨åŸŸ`åŠå…¶`å­èŠ‚ç‚¹å—ä½œç”¨åŸŸ`ä¸­æœ‰æ•ˆ
  * ä¼˜å…ˆçº§åˆ«ï¼šå†…è”æ ·å¼ > IDé€‰æ‹©å™¨ > ç±»é€‰æ‹©å™¨ = ä¼ªç±»é€‰æ‹©å™¨ = å±æ€§é€‰æ‹©å™¨ > æ ‡ç­¾é€‰æ‹©å™¨ = ä¼ªå…ƒç´ é€‰æ‹©å™¨ > é€šé…é€‰æ‹©å™¨ = å…„å¼Ÿé€‰æ‹©å™¨ = åä»£é€‰æ‹©å™¨

ä¸€æ ·ä¸œè¥¿æœ‰ä½¿ç”¨çš„åœºæ™¯ï¼Œè‡ªç„¶æœ‰å®ƒçš„ä»·å€¼ï¼Œç”¨çš„äººä¹Ÿä¼šè¶Šæ¥è¶Šå¤šã€‚



### åœºæ™¯

å˜é‡æœ‰ä¸€ä¸ªç‰¹åˆ«å¥½ç”¨çš„åœºæ™¯ï¼Œå°±æ˜¯ç»“åˆ`Listé›†åˆ`ä½¿ç”¨ã€‚

#### ğŸŒ°ï¼šæ¡å½¢åŠ è½½æ¡

ä¸€ä¸ªæ¡å½¢åŠ è½½æ¡é€šå¸¸ç”±å‡ æ ¹çº¿æ¡ç»„æˆï¼Œæ¯æ ¹çº¿æ¡å¯¹åº”ä¸€ä¸ªå­˜åœ¨ä¸åŒæ—¶å»¶çš„ç›¸åŒåŠ¨ç”»ï¼Œé€šè¿‡æ—¶é—´å·®è¿è¡Œç›¸åŒåŠ¨ç”»ï¼Œä»¥äº§ç”ŸåŠ è½½æ•ˆæœã€‚å¯ä»¥æŠŠä»£ç ç¼–å†™ä¸ºä»¥ä¸‹å½¢å¼ï¼š

```html
<ul class="strip-loading">
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
</ul>
```

```scss
.strip-loading {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 200px;
  height: 200px;
  li {
    list-style-type: none;
    border-radius: 3px;
    width: 6px;
    height: 30px;
    background-color: #ff6666;
    animation: beat 1s ease-in-out infinite;
    & + li {
      margin-left: 5px;
    }
    &:nth-child(2) {
      animation-delay: 200ms;
    }
    &:nth-child(3) {
      animation-delay: 400ms;
    }
    &:nth-child(4) {
      animation-delay: 600ms;
    }
    &:nth-child(5) {
      animation-delay: 800ms;
    }
    &:nth-child(6) {
      animation-delay: 1s;
    }
  }
}
@keyframes beat {
  0%,
  100% {
    transform: scaleY(1);
  }
  50% {
    transform: scaleY(.5);
  }
}
```

åˆ†æå¯çŸ¥ï¼Œæ¯ä¸ª`li`åªæ˜¯`animation-delay`ä¸åŒï¼Œå…¶ä½™ä»£ç å®Œå…¨ç›¸åŒã€‚æ˜¾ç„¶è¿™ç§æ–¹å¼ä¸çµæ´»ä¹Ÿä¸æ˜“äºå°è£…æˆç»„ä»¶ï¼Œè‹¥èƒ½åƒ`JS`é‚£æ ·å°è£…ä¸ºä¸€ä¸ªå‡½æ•°å¹¶æ ¹æ®å‚æ•°è¾“å‡ºä¸åŒæ ·å¼æ•ˆæœï¼Œå°±å¾ˆæ£’äº†ï¼›æ­¤æ—¶å°±å¯ä»¥ç”¨ä¸Šå˜é‡ã€‚

`HTMLéƒ¨åˆ†`çš„ä¿®æ”¹ï¼Œè®©æ¯ä¸ª`li`æ‹¥æœ‰ä¸€ä¸ªè‡ªå·±ä½œç”¨åŸŸä¸­çš„å˜é‡ã€‚å¯¹äº`CSSéƒ¨åˆ†`çš„ä¿®æ”¹ï¼Œåˆ†æå“ªäº›å±æ€§æ˜¯éšç€`index`é€’å¢è€Œå‘ç”Ÿè§„å¾‹å˜åŒ–çš„ï¼Œå¯¹è§„å¾‹å˜åŒ–çš„éƒ¨åˆ†ä½¿ç”¨å˜é‡è¡¨è¾¾å¼ä»£æ›¿ã€‚

```html
<ul class="strip-loading">
    <li style="--line-index: 0;"></li>
    <li style="--line-index: 1;"></li>
    <li style="--line-index: 2;"></li>
    <li style="--line-index: 3;"></li>
    <li style="--line-index: 4;"></li>
    <li style="--line-index: 5;"></li>
</ul>
```

```scss
.strip-loading {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 200px;
  height: 200px;
  li {
    list-style-type: none;
    border-radius: 3px;
    width: 6px;
    height: 30px;
    background-color: #ff6666;
    --time: calc(var(--line-index) * 200ms);
    animation: beat 1s ease-in-out var(--time) infinite;
    & + li {
      margin-left: 5px;
    }
  }
}

@keyframes beat {
  0%,
  100% {
    transform: scaleY(1);
  }
  50% {
    transform: scaleY(.5);
  }
}
```

å˜é‡`--line-index`ä¸`--time`ä½¿æ¯ä¸ª`li`æ‹¥æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„ä½œç”¨åŸŸã€‚

è¿™å°±æ˜¯å˜é‡çš„ä½œç”¨èŒƒå›´æ‰€è‡´ï¼ˆåœ¨`å½“å‰èŠ‚ç‚¹å—ä½œç”¨åŸŸ`åŠå…¶`å­èŠ‚ç‚¹å—ä½œç”¨åŸŸä¸­`æœ‰æ•ˆï¼‰ï¼Œå› æ­¤åœ¨`.strip-loading`çš„å—ä½œç”¨åŸŸä¸­è°ƒç”¨`--line-index`æ˜¯æ— æ•ˆçš„ã€‚

å¯¹äºé‚£äº›å«æœ‰`Listé›†åˆ`è¶Šå¤šçš„åœºæ™¯ï¼Œæ•ˆæœå°±è¶Šæ˜æ˜¾ã€‚è¿™æ ·å¤„ç†æ›´ç¾è§‚æ›´æ˜“ç»´æŠ¤ï¼Œæ¯”å¦‚æ›´æ–¹ä¾¿è°ƒæ•´çº¿æ¡çš„æ—¶é—´å·®ã€‚

#### ğŸŒ°ï¼šå¿ƒå½¢åŠ è½½æ¡

æ˜é‡‘çš„`é™ˆå¤§é±¼å¤´å…„`çš„å¿ƒå½¢åŠ è½½æ¡ã€‚

<img src="../imgs/heart-loading.awebp" alt="heart-loading" style="zoom:50%;" />

é€šè¿‡åŠ¨å›¾åˆ†æï¼Œå‘ç°æ¯æ¡çº¿æ¡çš„èƒŒæ™¯é¢œè‰²ä¸åŠ¨ç”»æ—¶å»¶ä¸åŒï¼Œå¦å¤–åŠ¨ç”»è¿è¡Œæ—¶çš„é«˜åº¦ä¹Ÿä¸åŒã€‚ä»”ç»†çœ‹å¯ä»¥å‘ç°ï¼Œç¬¬ä¸€æ¡ä¸ç¬¬ä¹æ¡çš„é«˜åº¦ä¸€æ ·ï¼Œç¬¬äºŒæ¡ä¸ç¬¬å…«æ¡çš„é«˜åº¦ä¸€æ ·ï¼Œä¾æ¬¡ç±»æ¨ï¼Œå¾—åˆ°`é«˜åº¦å˜æ¢ç›¸åŒç±»`çš„å…¬å¼ï¼šå¯¹ç§°index = æ€»æ•° + 1 - indexã€‚

èƒŒæ™¯é¢œè‰²ä½¿ç”¨æ»¤é•œçš„è‰²ç›¸æ—‹è½¬`hue-rotate()`ï¼Œç›®çš„æ˜¯ä¸ºäº†ä½¿é¢œè‰²è¿‡æ¸¡å¾—æ›´è‡ªç„¶ï¼›åŠ¨ç”»æ—¶å»¶ä¸ä¸Šè¿°æ¡å½¢åŠ è½½æ¡ä¸€æ ·ã€‚

ä»¥ä¸‹æ˜¯å®ç°ä»£ç ï¼š

```html
<div class="heart-loading">
    <ul style="--line-count: 9;">
        <li class="line-1" style="--line-index: 1;"></li>
        <li class="line-2" style="--line-index: 2;"></li>
        <li class="line-3" style="--line-index: 3;"></li>
        <li class="line-4" style="--line-index: 4;"></li>
        <li class="line-5" style="--line-index: 5;"></li>
        <li class="line-6" style="--line-index: 6;"></li>
        <li class="line-7" style="--line-index: 7;"></li>
        <li class="line-8" style="--line-index: 8;"></li>
        <li class="line-9" style="--line-index: 9;"></li>
    </ul>
</div>
```

```scss
.heart-loading {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 200px;
  height: 200px;

  ul {
    display: flex;
    justify-content: space-between;
    width: 150px;
    height: 10px;

    li {
      --angle: calc(var(--line-index) / var(--line-count) * .5turn);
      --time: calc((var(--line-index) - 1) * 40ms);
      list-style-type: none;
      border-radius: 5px;
      width: 10px;
      height: 10px;
      background-color: #3c9;
      filter: hue-rotate(var(--angle));
      animation-duration: 1s;
      animation-delay: var(--time);
      animation-iteration-count: infinite;
      &.line-1,
      &.line-9 {
        animation-name: beat-1;
      }
      &.line-2,
      &.line-8 {
        animation-name: beat-2;
      }
      &.line-3,
      &.line-7 {
        animation-name: beat-3;
      }
      &.line-4,
      &.line-6 {
        animation-name: beat-4;
      }
      &.line-5 {
        animation-name: beat-5;
      }
    }
  }
}

@keyframes beat-1 {
  0%,
 10%,
 90%,
100% {
    height: 10px;
  }
  45%,
  55% {
    height: 30px;
    transform: translate3d(0, -15px, 0);
  }
}
@keyframes beat-2 {
  0%,
 10%,
 90%,
100% {
    height: 10px;
  }
  45%,
  55% {
    height: 60px;
    transform: translate3d(0, -30px, 0);
  }
}
@keyframes beat-3 {
  0%,
 10%,
 90%,
100% {
    height: 10px;
  }
  45%,
  55% {
    height: 80px;
    transform: translate3d(0, -40px, 0);
  }
}
@keyframes beat-4 {
  0%,
 10%,
 90%,
100% {
    height: 10px;
  }
  45%,
  55% {
    height: 90px;
    transform: translate3d(0, -30px, 0);
  }
}
@keyframes beat-5 {
  0%,
 10%,
 90%,
100% {
    height: 10px;
  }
  45%,
  55% {
    height: 90px;
    transform: translate3d(0, -20px, 0);
  }
}
```

å¯ä»¥çœ‹åˆ°ç›¸ä¼¼çš„æ•ˆæœï¼Œä½†é¢œè‰²ã€æ³¢åŠ¨æ›²çº¿å’Œè·³åŠ¨é¢‘ç‡æœ‰ç‚¹ä¸åŒã€‚

#### ğŸŒ°ï¼šæ ‡ç­¾å¯¼èˆª

å‰ä¸¤ä¾‹æ¼”ç¤ºäº†å˜é‡åœ¨`CSS`ä¸­çš„åº”ç”¨ä»¥åŠä¸€äº›å¦™ç”¨æŠ€å·§ï¼Œç°åœ¨æ¼”ç¤ºå˜é‡åœ¨`JS`ä¸­çš„åº”ç”¨ã€‚

JSä¸­æœ‰ä¸‰ä¸ªæ“ä½œå˜é‡çš„APIï¼š

* è¯»å–å˜é‡ï¼šelem.style.getPropertyValue()
* è®¾ç½®å˜é‡ï¼šelem.style.setProperty()
* åˆ é™¤å˜é‡ï¼šelem.style.removeProperty()

æœ¬ä¾‹ä¸»è¦æ˜¯ä½¿ç”¨å˜é‡æ ‡è®°`æ¯ä¸ªæ ‡ç­¾çš„èƒŒæ™¯é¢œè‰²`ä¸`åˆ‡æ¢æ ‡ç­¾çš„æ˜¾ç¤ºçŠ¶æ€`ã€‚

```html
<div class="tab-navbar">
    <nav>
        <label class="active">æ ‡é¢˜1</label>
        <label>æ ‡é¢˜2</label>
        <label>æ ‡é¢˜3</label>
        <label>æ ‡é¢˜4</label>
    </nav>
    <main>
        <ul style="--tab-count: 4;">
            <li style="--bg-color: #f66;">å†…å®¹1</li>
            <li style="--bg-color: #66f;">å†…å®¹2</li>
            <li style="--bg-color: #f90;">å†…å®¹3</li>
            <li style="--bg-color: #09f;">å†…å®¹4</li>
        </ul>
    </main>
</div>
```

```scss
.tab-navbar {
  display: flex;
  overflow: hidden;
  flex-direction: column-reverse;
  border-radius: 10px;
  width: 300px;
  height: 400px;
  nav {
    display: flex;
    height: 40px;
    line-height: 40px;
    text-align: center;
    background-color: #f0f0f0;
    label {
      flex: 1;
      cursor: pointer;
      transition: all 300ms;
      &.active {
        background-color: #3c9;
        color: #fff;
      }
    }
  }
  main {
    flex: 1;
    ul {
      margin: 0;
      padding: 0;
      --tab-index: 0;
      --tab-width: calc(var(--tab-count) * 100%);
      --tab-move: calc(var(--tab-index) / var(--tab-count) * -100%);
      display: flex;
      flex-wrap: nowrap;
      width: var(--tab-width);
      height: 100%;
      transform: translate3d(var(--tab-move), 0, 0);
      transition: all 300ms;
    }
    li {
      display: flex;
      justify-content: center;
      align-items: center;
      flex: 1;
      background-color: var(--bg-color);
      font-weight: bold;
      font-size: 20px;
      color: #fff;
    }
  }
}
```

```html
<script>
    const navs = document.querySelectorAll('.tab-navbar nav label');
    const tabs = document.querySelector('.tab-navbar main ul');
    navs.forEach((n, i) => n.addEventListener("click", e => {
        navs.forEach(v => v.classList[v === e.target ? "add" : "remove"]("active"));
        tabs.style.setProperty("--tab-index", i);
    }))
</script>
```

åœ¨`<ul>`ä¸­å®šä¹‰`--tab-index`è¡¨ç¤ºæ ‡ç­¾å½“å‰çš„ç´¢å¼•ï¼Œå½“ç‚¹å‡»æŒ‰é’®æ—¶é‡ç½®`--tab-index`çš„å€¼ï¼Œå¯å®ç°ç§»åŠ¨`<ul>`çš„ä½ç½®æ˜¾ç¤ºæŒ‡å®šæ ‡ç­¾ï¼›å¯ç§»åŠ¨`<ul>`æ˜¯å› ä¸ºå®šä¹‰äº†`--tab-move`ï¼Œé€šè¿‡`calc()`è®¡ç®—`--tab-index`ä¸`--tab-move`çš„å…³ç³»ï¼Œä»¥æ“æ§`transform: translate3d()`ç§»åŠ¨`<ul>`ã€‚

å¦å¤–ï¼Œåœ¨`<li>`ä¸­å®šä¹‰`--bg-color`è¡¨ç¤ºæ ‡ç­¾çš„èƒŒæ™¯é¢œè‰²ï¼Œä¹Ÿæ˜¯ä¸€ç§ç®€æ´çš„æ¨¡æ¿èµ‹å€¼æ–¹å¼ï¼Œæ€»æ¯”å†™`<li :stlye="backgroundColor: ${color}">`è¦å¥½çœ‹ã€‚è‹¥å¤šä¸ªå±æ€§ä¾èµ–ä¸€ä¸ªå˜é‡èµ‹å€¼ï¼Œé‚£ä½¿ç”¨å˜é‡èµ‹å€¼åˆ°`style`ä¸­å°±æ›´æ–¹ä¾¿äº†ï¼Œé‚£äº›å±æ€§å¯åœ¨`cssæ–‡ä»¶`ä¸­è®¡ç®—ä¸èµ‹å€¼ï¼Œè¿™æ ·å¯å¸®åŠ©`JS`åˆ†æ‹…ä¸€äº›å±æ€§è®¡ç®—å·¥ä½œã€‚

#### ğŸŒ°ï¼šæ‚¬æµ®è·Ÿè¸ªæŒ‰é’®

æ€è·¯å¾ˆç®€å•ï¼Œå…ˆå¯¹æŒ‰é’®å¸ƒå±€ä¸ç€è‰²ï¼Œç„¶åä½¿ç”¨ä¼ªå…ƒç´ æ ‡è®°é¼ æ ‡çš„ä½ç½®ï¼Œå®šä¹‰`--x`ä¸`--y`è¡¨ç¤ºä¼ªå…ƒç´ åœ¨æŒ‰é’®ä¸­çš„åæ ‡ï¼Œé€šè¿‡`JS`è·å–é¼ æ ‡åœ¨æŒ‰é’®ä¸­çš„`offsetX`ä¸`offsetY`åˆ†åˆ«èµ‹å€¼ç»™`--x`ä¸`--y`ï¼Œå†å¯¹ä¼ªå…ƒç´ æ·»åŠ å¾„å‘æ¸å˜çš„èƒŒæ™¯é¢œè‰²ï¼Œå¤§åŠŸå‘Šæˆï¼Œä¸€ä¸ªé…·ç‚«çš„é¼ æ ‡æ‚¬æµ®è·Ÿè¸ªæ•ˆæœå°±è¿™æ ·è¯ç”Ÿäº†ã€‚

```html
<a href="javascript: void(0);" class="track-btn">
    <span>å¦™ç”¨CSSå˜é‡ï¼Œè®©ä½ çš„CSSå˜å¾—æ›´å¿ƒåŠ¨</span>
</a>
```

```scss
.track-btn {
  overflow: hidden;
  display: inline-block; /* reset */
  text-decoration: none; /* reset */
  position: relative;
  border-radius: 25px;
  width: 400px;
  height: 50px;
  background-color: #66f;
  cursor: pointer;
  line-height: 50px;
  text-align: center;
  font-weight: bold;
  font-size: 18px;
  color: #fff;

  span {
    position: relative; // å½¢æˆå±‚å ä¸Šä¸‹æ–‡
    pointer-events: none; // ä¸åŠ ä¼šå¡é¡¿ï¼Œå¥½åƒæ²¡ä»€ä¹ˆæ„Ÿè§‰
  }

  &::before {
    --size: 0;
    position: absolute;
    left: var(--x);
    top: var(--y);
    width: var(--size);
    height: var(--size);
    background-image: radial-gradient(circle closest-side, #09f, transparent);
    content: "";
    transform: translate3d(-50%, -50%, 0);
    transition: width ease 200ms, height ease 200ms;
  }

  &:hover::before {
    --size: 400px;
  }
}
```

```html
<script>
    const btn = document.querySelector('.track-btn');
    const btnStyle = btn.style;
    btn.addEventListener("mousemove", e => {
        btnStyle.setProperty("--x", `${e.offsetX}px`);
        btnStyle.setProperty("--y", `${e.offsetY}px`);
    })
</script>
```

å¯ç»“åˆ`é¼ æ ‡äº‹ä»¶`å®Œæˆæ›´å¤šçš„é…·ç‚«æ•ˆæœï¼Œä¾‹å¦‚åŠ¨ç”»å…³è”ã€äº‹ä»¶å“åº”ç­‰æ“ä½œã€‚å‘æŒ¥æƒ³è±¡åŠ›ï¼

#### ğŸŒ°ï¼šæ‚¬æµ®è§†å·®æŒ‰é’®

`CodePen`ä¸­çš„ä¸€ä¸ªç¤ºä¾‹ï¼Œ[æ‚¬æµ®è§†å·®æŒ‰é’®](https://codepen.io/electerious/pen/MjZPVe)ï¼Œå…·ä½“ä»£ç æ¶‰åŠä¸€äº›`3Då˜æ¢`çš„çŸ¥è¯†ã€‚

```html
<div class="var-box">
    <a href="javascript: void(0);" class="parallel-btn" data-name="å¦™ç”¨CSSå˜é‡ï¼Œè®©ä½ çš„CSSå˜å¾—æ›´å¿ƒåŠ¨"></a>
</div>
```

```scss
.var-box {
  transform: perspective(800px);
  transform-style: preserve-3d;

  .parallel-btn {
    display: inline-block;
    position: relative;
    width: 400px;
    height: 50px;
    line-height: 50px;
    user-select: none;
    text-align: center;
    font-size: 18px;
    color: #fff;
    &::before {
      position: absolute;
      content: "";
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      border-radius: 4px;
      background-image: linear-gradient(135deg, #6e8efb, #a777e3);
      box-shadow: 0 2px 5px rgba(#000, .2);
      will-change: transform;
      transform: /*translateY(var(--ty, 0))*/ rotateX(var(--rx, 0)) rotateY(var(--ry, 0)) translateZ(var(--tz, -12px));
      transition: box-shadow 500ms ease, transform 200ms ease;
    }
    &::after {
      position: relative;
      display: inline-block;
      font-weight: bold;
      content: attr(data-name);
      will-change: transform;
      transform: /*translateY(var(--ty, 0))*/ rotateX(var(--rx, 0)) rotateY(var(--ry, 0));
      transition: transform 200ms ease;
    }
    &:hover::before {
      box-shadow: 0 5px 15px rgba(#000, .3);
    }
  }
}
```

```html
<script>
    const pbtn = document.querySelector('.parallel-btn');
    const pbtnStyle = pbtn.style;
    const pbtnRect = pbtn.getBoundingClientRect();
    pbtn.addEventListener("mousemove", e => {
        const dx = e.offsetX - pbtnRect.width / 2; // offsetX:é¼ æ ‡åæ ‡åˆ°å…ƒç´ çš„å·¦ä¾§çš„è·ç¦»
        const dy = e.offsetY - pbtnRect.height / 2; // offsetY:é¼ æ ‡åæ ‡åˆ°å…ƒç´ çš„é¡¶ä¾§çš„è·ç¦»
        pbtnStyle.setProperty("--rx", `${dy / -1}deg`);
        pbtnStyle.setProperty("--ry", `${dx / 10}deg`);
    });
    pbtn.addEventListener("mouseup", e => {
        pbtnStyle.setProperty("--tz", "-12px");
    });
    pbtn.addEventListener("mousedown", e => {
        pbtnStyle.setProperty("--tz", "-25px");
    });
    pbtn.addEventListener("mouseleave", e => {
        pbtnStyle.setProperty("--rx", `0`);
        pbtnStyle.setProperty("--ry", `0`);
        pbtnStyle.setProperty("--ty", `0`);
    });
</script>
```



### å…¼å®¹

ç°ä»£æµè§ˆå™¨ä¸­ï¼Œå˜é‡çš„å…¼å®¹æ€§è¿˜æ˜¯æŒºå¥½çš„ã€‚ç°åœ¨å„å¤§æµè§ˆå™¨å‚å•†å¿«é€Ÿè¿­ä»£ï¼Œäº§å“å¯¹äºç”¨æˆ·ä½“éªŒæ¥è¯´å äº†å¾ˆå¤§æ¯”é‡ï¼Œå› æ­¤åœ¨æ¡ä»¶å…è®¸çš„æƒ…å†µä¸‹è¿˜æ˜¯å¤§èƒ†å°æ–°ï¼Œä¸è¦è¢«ä¸€äº›è¿‡å»çš„æ‰€è°“çš„è§„èŒƒçº¦æŸç€ã€‚![var support](../imgs/var-support.png)

è‹¥ä¸€ä¸ªäº§å“çš„ç”¨æˆ·ä½“éªŒå—é™äºè¿œå¤æµè§ˆå™¨çš„å‹åˆ¶ï¼Œç›¸ä¿¡è¯¥äº§å“ä¹Ÿä¸ä¼šèµ°å¾—å¾ˆè¿œã€‚

å®Œæˆä¸€ä¸ªäº§å“æ—¶ï¼Œä¸ä»…æ˜¯ä¸ºäº†å®Œæˆå·¥ä½œä»»åŠ¡ï¼Œè‹¥åœ¨ä¿è¯è¿›åº¦çš„åŒæ—¶èƒ½èŠ±ç‚¹å¿ƒæ€ç‚¹ç¼€ï¼Œå¯èƒ½ä¼šæœ‰æ„å¤–çš„æ”¶è·ã€‚

å…¶å®å¤šå¤šæ€è€ƒï¼Œå°±èƒ½æŠŠå˜é‡ç”¨åœ¨å¾ˆå¤šåœºæ™¯ä¸­ã€‚

#### å½©è›‹ï¼šä¸€ä¸ªæš–å¿ƒå½©è™¹è‰²è°ƒæ­é…çš„çˆ±å¿ƒç‚¹èµæŒ‰é’®

```html
<button class="like-btn">
    <div class="like-wrapper">
        <div class="like-ripple"></div>
        <svg class="like-heart" width="24" height="24" viewBox="0 0 24 24">
            <path d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"></path>
        </svg>
        <div class="like-article" style="--line-count: 6;">
            <div class="like-article-item" style="--line-index: 1;"></div>
            <div class="like-article-item" style="--line-index: 2;"></div>
            <div class="like-article-item" style="--line-index: 3;"></div>
            <div class="like-article-item" style="--line-index: 4;"></div>
            <div class="like-article-item" style="--line-index: 5;"></div>
            <div class="like-article-item" style="--line-index: 6;"></div>
        </div>
    </div>
</button>
```

```scss
$heart-color: #f66;
$easing: cubic-bezier(.7, 0, .3, 1);
$duration: 500ms;
.like-btn {
  position: relative;
  z-index: 1;
  border: none;
  border-radius: 100%;
  width: 1em;
  height: 1em;
  appearance: none;
  background-color: #fff;
  cursor: pointer;
  font-size: 200px;
  transition: all $duration $easing;
  &::before {
    position: absolute;
    top: 0;
    left: 0;
    z-index: -1;
    border-radius: inherit;
    width: 100%;
    height: 100%;
    box-shadow: 0 .3em .6em rgba(#000, .3);
    content: "";
    transition: inherit;
  }
  &::after {
    position: absolute;
    top: 0;
    left: 0;
    z-index: -1;
    border-radius: inherit;
    width: 100%;
    height: 100%;
    background-color: #fff;
    content: "";
  }
  &:active::before {
    animation: depress-shadow $duration $easing both;
  }
  &:focus::after {
    animation: depress $duration $easing both;
  }
}
.like-wrapper {
  display: grid;
  justify-content: center;
  align-items: center;
  > *{
    grid-area: 1/1;
    margin: auto;
  }
}
.like-ripple {
  overflow: hidden;
  position: relative;
  border-radius: 100%;
  width: 1em;
  height: 1em;
  &::before {
    position: absolute;
    top: 0;
    left: 0;
    border: .4em solid $heart-color;
    border-radius: inherit;
    width: 100%;
    height: 100%;
    content: "";
    transform: scale(0);
  }
  .like-btn:focus & {
    &::before {
      animation: ripple-out $duration $easing;
    }
  }
}
.like-heart {
  display: block;
  width: .5em;
  height: .5em;
  transform-origin: center 80%;
  path {
    transition: all $duration $easing;
    stroke: $heart-color;
    stroke-width: 2;
    fill: transparent;
    .like-btn:focus & {
      fill: $heart-color;
    }
  }
  .like-btn:focus & {
    animation: heart-bounce $duration $easing;
  }
}
.like-article {
  position: relative;
  width: 1px;
  height: 1px;
}
.like-article-item {
  --angle: calc(var(--line-index) / var(--line-count) * 1turn);
  $color-list: #f66 #66f #f90 #09f #9c3 #3c9;
  position: absolute;
  top: 0;
  left: 0;
  border-radius: .05em;
  width: .1em;
  height: .1em;
  transform: translate(-50%, -50%) rotate(var(--angle)) translateY(0) scaleY(0);
  transition: all $duration $easing;
  @each $v in $color-list {
    $index: index($color-list, $v);
    &:nth-child(#{$index}) {
      background-color: $v;
    }
  }
  .like-btn:focus & {
    animation: particle-out calc(#{$duration} * 1.2) $easing forwards;
  }
}
.like-btn:focus {
  cursor: normal;
  pointer-events: none;
}
@keyframes depress {
  0%,
100% {
    transform: none;
  }
  50% {
    transform: translateY(5%) scale(.9);
  }
}
@keyframes depress-shadow {
  0%,
100% {
    transform: none;
  }
  50% {
    transform: scale(.5);
  }
}
@keyframes heart-bounce {
  0%,
 80%,
100% {
    transform: scale(1);
  }
  40% {
    transform: scale(.7);
  }
}
@keyframes particle-out {
  50% {
    height: .3em;
    transform: translate(-50%, -50%) rotate(var(--angle)) translateY(.8em) scale(1);
  }
  60% {
    height: .2em;
    transform: translate(-50%, -50%) rotate(var(--angle)) translateY(.8em) scale(1);
  }
  100% {
    transform: translate(-50%, -50%) rotate(var(--angle)) translateY(1em) scale(0);
  }
}
@keyframes ripple-out {
  from {
    transform: scale(0);
  }
  to {
    transform: scale(5);
  }
}
```
