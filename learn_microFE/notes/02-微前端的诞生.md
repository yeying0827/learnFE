## 微前端的诞生

大致的思路：每一个功能（服务）`独立部署`、`独立运行`，每一个模块都拆分成`更小`、`更易于管理`的`微应用`

### web时代的发展

`web1.0`时代，内容基本上是`静态`、`单向阅读`为主，网站是信息提供者，过程是个单向的过程，从网络到用户，这时候的网站没有什么用户体验之说，只是单纯的可以展示内容，保证整体展示是工整的即可。

在`web2.0`时代，内容是`人与人`之间的沟通，网站负责提供平台，大家各自发表自己的信息和去了解别人提供的信息，这个时候对于用户体验的提升，在于用户对于内容上的体验，用户在访问不同的网站获取到不同的内容，去满足自己在网络上所要得到的所有知识。

在`web3.0`时代，就是`人与网络与人`之间的通信关系，网络成为了用户的需求理解者和信息提供者，由于提供信息的平台越来越多，内容的种类越来越多，用户对于平台的要求也会越来越高。

这个时候，用户体验对于我们开发来说，就越发得重要，比如每一个页面的展示、每一个按钮的点击，都可能影响到用户是否在当前网站留存。

好的用户体验，不只是访问速度，还要考虑如何提供一个完善的功能链来满足用户的功能所需，基于市场的需求，网站的功能越来越多，要做的事情也就越来越多，如果把所有的功能都放在了一起，网站的可维护性就会变得特别差，存在的风险也会越来越多，这就催生了微前端。

### 是什么条件下诞生了微前端

开发模式在不同的web时代的实现方式也在逐渐变化：

* web1.0：信息比较简单，就是单纯嵌套网页（css+html+js/jq+cms后台），数据简单，展示简单
* web2.0：出现了前后端分离（css+html+js+ajax），前端对于开发模式上面，做出了很多的研究和琢磨，期间最火的就是MVC（Model View Controller）
* web3.0：这个阶段，开始考虑用户体验（渲染和响应速度）、开发速度等，技术根据需求而生，此时`react`、`vue`、`angular`等框架就应运而生了。

技术是一个逐渐调优的过程，在框架以外，有些事情也需要自己考虑，项目越来越大，应该如何维护？

开发人员的水平参差不齐，项目搭建、开发规范、代码提交合并、项目部署等，在项目迭代过程中，每一环节出现问题，都会影响到一整个项目的运行和用户的使用。

### 微前端方案1——iframe

最早用来实现`微前端`的方式，是通过使用`iframe`，页面里面嵌套一个`iframe`，通过设置`url`来做`微应用`的划分，这样可以保证每一个`微应用`都是独立部署、独立运行的，哪个出现问题，也不会影响到其他应用，可以保证`在一定范围内用户正常使用`。

`iframe`对于一些简单的静态、纯展示类的页面是很好的方案，但是如果有需要做`交互`、`信息共享`、`数据更新`等行为的时候，`iframe`就不能很好的满足我们的需求了。`iframe`不能很好满足的需求有以下几点：

* 在`iframe`内的页面做切换的时候，浏览器回退的时候，就会出现页面跳转错误
* 由于它的隔离性可以完美地隔离上下文之间的所有资源，但是隔离的同时就无法做到一些共享资源
* 每一次`iframe`的启动，都需要重新做资源的加载
* 如果在嵌套`iframe`的页面有对话框弹窗，由于是覆盖整个页面的，`iframe`页面可以`resize`，`resize`也会影响到嵌套页面的展示效果
* 对于`iframe`的状态捕获，假设`iframe 子应用`加载、预渲染、渲染后、卸载、卸载后、加载报错的情况，整个生命周期处理上面都需要做很多的处理，麻烦而复杂，对`iframe`生命周期的方案做得不好的话，意外的情况就会影响到用户的使用。

`iframe Message`跨域通信

### 微前端方案2——single-spa

`single-spa`完美地处理了上述`iframe`所存在的问题。`single-spa`官网对于`single-spa`的阐述：

> `sinlge-spa`的诞生，是通过从现在的一些框架：react、angular、vue的生命周期中获得了灵感，将生命周期运用于整个应用，避免应用程序被束缚。
>
> 现在`single-spa`几乎支持任何框架，由于JavaScript因其许多框架的寿命短而臭名昭著，我们决定让它在任何您想要的框架都易于使用。

没有任何一个框架可以完美地解决市场的需求，任何方案都是解决目前存在的问题，未来是未知的

