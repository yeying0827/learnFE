## å®æˆ˜ç—›ç‚¹1ï¼šå¤æ‚é¡¹ç›®çš„è§„èŒƒå’ŒåŸºç¡€åº“å°è£…

### ç»„ä»¶åº“

æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç»„ä»¶åº“å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿæ­å»ºé¡¹ç›®ï¼Œç»„ä»¶åº“æä¾›äº†å„å¼å„æ ·çš„å°è£…å®Œå¤‡çš„ç»„ä»¶ã€‚

ğŸŒ°ï¼šElement3

* å®‰è£…ä¾èµ–

  ```shell
  yarn add element3
  ```

* åœ¨å…¥å£æ–‡ä»¶ä¸­å¼•å…¥å¹¶ä½¿ç”¨

  ```javascript
  // src/main.js
  import { createApp } from 'vue'
  // ...
  import 'element3/lib/theme-chalk/index.css';
  // ...
  
  createApp(App).use(store)/*æ³¨å†Œæ•°æ®æº*/.use(router)/*æ³¨å†Œè·¯ç”±æ•°æ®*/
      .use(Element3)/*æ³¨å†ŒElement3å†…ç½®çš„ç»„ä»¶*/.mount('#app')
  ```

  [å®˜æ–¹æ–‡æ¡£](https://e3.shengxinjing.cn/#/component/installation)

* åœ¨`src/App.vue`æ–‡ä»¶ä¸­ä½¿ç”¨

  ```vue
  <!-- src/App.vue -->
  <template>
    <el-container>
      <el-header>Header</el-header>
      <el-container>
        <el-aside width="200px">
          <div>
            <router-link to="/">é¦–é¡µ</router-link>
          </div>
          <div>
            <router-link to="/about">å…³äº</router-link>
          </div>
        </el-aside>
        <el-container>
          <el-main>
            <router-view></router-view>
          </el-main>
        </el-container>
      </el-container>
    </el-container>
  </template>
  
  <style>
  .el-header,
  .el-footer {
    background-color: #b3c0d1;
    color: #333;
    text-align: center;
  }
  
  .el-aside {
    background-color: #d3dce6;
    color: #333;
  }
  
  .el-main {
    background-color: #e9eef3;
    color: #333;
  }
  
  body > .el-container {
    margin-bottom: 40px;
  }
  
  /*...*/
  </style>
  ```

  ä½¿ç”¨äº†Element3çš„Containerå¸ƒå±€ç»„ä»¶ å®ç°ç®¡ç†ç³»ç»Ÿçš„æ•´ä½“å¸ƒå±€ã€‚

  Headerç»„ä»¶ï¼Œæ‰¿è½½ç€é¡µé¢çš„å¤´éƒ¨ä¿¡æ¯ï¼›asideç»„ä»¶å¯¹åº”äº†å‰ç«¯é¡µé¢å·¦ä¾§çš„ä¾§è¾¹æ ï¼Œæ‰¿è½½ç€é¡µé¢ä¸»è¦çš„å¯¼èˆªä¿¡æ¯ï¼›mainç»„ä»¶å†…éƒ¨ä½¿ç”¨router-viewæ¸²æŸ“è·¯ç”±å¯¹åº”çš„ç»„ä»¶ã€‚



### å·¥å…·åº“

è·å–åç«¯æ•°æ®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨axioså‘èµ·ç½‘ç»œè¯·æ±‚ã€‚

å®‰è£…ä¾èµ–ï¼š

```shell
yarn add axios
```

åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œä¸šåŠ¡é€»è¾‘æœ‰å¾ˆå¤šé…ç½®éœ€è¦è¿›è¡Œç»Ÿä¸€è®¾ç½®ï¼Œæ‰€ä»¥å®‰è£…å®Œaxiosåï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å°è£…é¡¹ç›®ä¸­çš„ä¸šåŠ¡é€»è¾‘ã€‚

* é¦–å…ˆï¼Œç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åï¼Œåç«¯ä¸€èˆ¬ä¼šè¿”å›ä¸€ä¸ªtokenï¼Œç”¨æ¥å­˜å‚¨ç”¨æˆ·çš„åŠ å¯†ä¿¡æ¯ï¼Œç”¨äºåç»­httpè¯·æ±‚æ—¶çš„è®¤è¯ã€è§£å¯†å’Œæƒé™æ ¡éªŒã€‚

æ‰€ä»¥è¦å¯¹æ‰€æœ‰çš„httpè¯·æ±‚è¿›è¡Œç»Ÿä¸€æ‹¦æˆªï¼Œç¡®ä¿åœ¨è¯·æ±‚å‘å‡ºä¹‹å‰ï¼Œä»æœ¬åœ°å­˜å‚¨ä¸­è·å–tokenï¼›åç«¯æ¥å£å¦‚æœæŠ¥é”™çš„è¯ï¼Œè¿˜è¦è¿›è¡Œç»Ÿä¸€æ‹¦æˆªå¤„ç†ã€‚

å¯ä»¥æŠŠç½‘ç»œæ¥å£ä¸­éœ€è¦ç»Ÿä¸€å¤„ç†çš„å†…å®¹éƒ½æ”¾åœ¨æ‹¦æˆªå™¨ä¸­ç»Ÿä¸€å¤„ç†ã€‚

```javascript
// src/api/http.js
import axios from "axios";
import {useMsgbox, Message} from "element3";
import store from '@/store';
import {getToken} from '@/utils/auth';

const service = axios.create({
    baseURL: process.env.VUE_APP_BASE_API, // url = base url + request url
    timeout: 5000 // request timeout
});

service.interceptors.request.use(
    config => {
        if (store.getters.token) {
            config.headers['X-Token'] = getToken();
        }
        return config;
    },
    error => {
        console.log(error); // for debug
        return Promise.reject(error);
    }
);

service.interceptors.response.use(
    response => {
        const res = response.data;
        if (res.code !== 20000) {
            console.log('æ¥å£ä¿¡æ¯æŠ¥é”™', res.message);
            return Promise.reject(new Error(res.message || 'Error'));
        } else {
            return res;
        }
    },
    error => {
        console.log('æ¥å£ä¿¡æ¯æŠ¥é”™', error);
        return Promise.reject(error);
    }
);

export default service;
```



åœ¨é¡¹ç›®é‡Œé›†æˆCSSé¢„ç¼–è¯‘å™¨ï¼ŒCSSé¢„ç¼–è¯‘å™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¿«ã€æ›´é«˜æ•ˆåœ°ç®¡ç†å’Œç¼–å†™CSSä»£ç ã€‚

å®‰è£…Sassä¾èµ–ï¼š

```shell
yarn add sass
```

ä½¿ç”¨ï¼š

ç›´æ¥åœ¨styleæ ‡ç­¾ä¸Šæ–°å¢`lang="scss"`ï¼Œå°±å¯ä»¥ä½¿ç”¨Sassè¯­æ³•äº†ï¼›å¯ä»¥æå¤§æé«˜å†™CSSçš„æ•ˆç‡ã€‚

Sassä¸­å¯ä»¥å®šä¹‰å˜é‡ã€å‡½æ•°ã€åµŒå¥—ã€ç»§æ‰¿ã€å¾ªç¯ç­‰ç­‰ï¼Œè®©CSSçš„ä¸–ç•Œé‡Œä¹Ÿæ‹¥æœ‰äº†ç¼–ç¨‹åœ°æ¦‚å¿µï¼Œåœ¨å®é™…é¡¹ç›®ä¸­å¯ä»¥ä½¿ç”¨å˜é‡å’Œå‡½æ•°ç­‰æ¦‚å¿µä¼˜åŒ–CSSä»£ç ã€‚

æ¯”å¦‚Element3æºç ä¸­çš„`common/var.scss`æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹è¿™äº›å˜é‡ï¼Œè·å¾—ä¸€ä¸ªå®šåˆ¶é£æ ¼çš„Element3ã€‚å®šä¸‹æ•´ä½“è®¾è®¡é£æ ¼ï¼Œé¢„è®¾å¥½æ•´ä½“çš„é¢œè‰²ã€è¾¹æ¡†ã€å­—ä½“å¤§å°ç­‰ç­‰ï¼Œå¯ä»¥æå¤§é™ä½åç»­çš„cssç»´æŠ¤æˆæœ¬ã€‚



### ä»£ç è§„èŒƒå’Œæäº¤è§„èŒƒ

ä½¿é¡¹ç›®æ›´å®Œå–„ã€æ›´å¥å£®

å›¢é˜Ÿäº§å‡ºçš„é¡¹ç›®éœ€è¦æœ‰ä¸€è‡´çš„é£æ ¼ï¼Œè¿™æ ·ä»£ç åœ¨å›¢é˜Ÿä¹‹é—´é˜…è¯»èµ·æ¥æ—¶ï¼Œä¹Ÿä¼šæ›´åŠ æµç•…ã€‚Eslintå°±æ˜¯ä¸“é—¨ç”¨æ¥åšè§„èŒƒå›¢é˜Ÿä»£ç çš„ä¸€ä¸ªåº“ã€‚

å®‰è£…ä¾èµ–ï¼š

```shell
yarn add eslint -D
```

Eslintå®‰è£…åï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ`npx eslint --init`ï¼Œç„¶åæŒ‰ç…§ç»ˆç«¯æ“ä½œçš„æç¤ºå®Œæˆä¸€ç³»åˆ—è®¾ç½®æ¥åˆ›å»ºé…ç½®æ–‡ä»¶ã€‚

```shell
$ npx eslint --init
You can also run this command directly using 'npm init @eslint/config'.
Need to install the following packages:
  @eslint/create-config@0.4.0
Ok to proceed? (y) y
âœ” How would you like to use ESLint? Â· problems
âœ” What type of modules does your project use? Â· esm
âœ” Which framework does your project use? Â· vue
âœ” Does your project use TypeScript? Â· No / Yes
âœ” Where does your code run? Â· browser
âœ” What format do you want your config file to be in? Â· JSON
The config that you've selected requires the following dependencies:

eslint-plugin-vue@latest
âœ” Would you like to install them now? Â· No / Yes
âœ” Which package manager do you want to use? Â· yarn
Installing eslint-plugin-vue@latest
yarn add v1.22.10
```

å¯ä»¥æ ¹æ®å›¢é˜Ÿé£æ ¼å»é¢å¤–é…ç½®Eslintçš„æ’ä»¶ã€‚

ä½¿ç”¨ç¤ºä¾‹ï¼š

1. é…ç½®`eslintrc.json`ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­

   ```json
   {
     "rules": {
       "semi": ["warn", "never"]
     }
   }
   ```

2. æ‰§è¡Œ`npx eslint src`ï¼ŒæŸ¥çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œå…¶ä¸­è¯¦ç»†å‘Šè¯‰äº†ä½ å“ªé‡Œçš„ä»£ç ä¸åˆè§„èŒƒ

3. æ ¹æ®æŠ¥é”™ä¿¡æ¯è¿›è¡Œä¿®æ”¹



ä»£ç æäº¤ç¯èŠ‚ï¼š

å¯èƒ½å‡ºç°æäº¤ä¿¡æ¯ç´Šä¹±ã€é£æ ¼ä¸ä¸€è‡´çš„æƒ…å†µã€‚

* åœ¨æ‰§è¡Œgit commitå‘½ä»¤çš„æ—¶å€™ï¼ŒåŒæ—¶æ‰§è¡Œeslintã€‚ä½¿ç”¨huskyç®¡ç†gitçš„é’©å­å‡½æ•°
* åç»­å•å…ƒæµ‹è¯•ä¹Ÿä¼šæ”¾åœ¨gitçš„é’©å­å‡½æ•°ä¸­æ‰§è¡Œï¼Œç¡®ä¿æäº¤åˆ°gitä»“åº“ä¸­çš„ä»£ç éƒ½æ˜¯æµ‹è¯•é€šè¿‡çš„



å®šä¹‰gitçš„æäº¤è§„èŒƒï¼Œæè¿°ä¿¡æ¯ç²¾å‡†çš„gitæäº¤æ—¥å¿—ï¼Œä¼šè®©æˆ‘ä»¬åœ¨åæœŸç»´æŠ¤å’Œå¤„ç†bugæ—¶æœ‰æ®å¯æŸ¥ï¼›è¿˜å¯ä»¥æ ¹æ®è§„èŒƒçš„æäº¤ä¿¡æ¯ï¼Œå¿«é€Ÿç”Ÿæˆå¼€å‘æ—¥å¿—ï¼Œä»è€Œæ–¹ä¾¿æˆ‘ä»¬è¿½è¸ªé¡¹ç›®å’ŒæŠŠæ§è¿›åº¦ã€‚

Vue3æºç åœ¨ä»£ç æ—¥å¿—ä¸­ï¼Œä½¿ç”¨çš„æ˜¯`ç±»åˆ«: ä¿¡æ¯`çš„æ ¼å¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç±»åˆ«æ¸…æ™°åœ°çŸ¥é“è¿™æ¬¡æäº¤æ˜¯ä»£ç ä¿®å¤ã€è¿˜æ˜¯åŠŸèƒ½å¼€å‘ï¼ˆfeatï¼‰ï¼›å†’å·åé¢çš„ä¿¡æ¯æ˜¯ç”¨æ¥è§£é‡Šæ­¤æ¬¡æäº¤çš„å†…å®¹ï¼Œåœ¨ä¿®å¤bugæ—¶ï¼Œè¿˜ä¼šå¸¦ä¸Šissueä¸­çš„ç¼–å·ã€‚



### æ€»ç»“

é¦–å…ˆå¼•å…¥Element3ç»„ä»¶åº“ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä½¿ç”¨layoutå’Œcontainerå¸ƒå±€å®ç°é¡µé¢çš„æ­å»ºï¼Œç„¶åå¼•å…¥axiosä½œä¸ºç½‘ç»œè¯·æ±‚åº“ï¼Œå¹¶å¯¹æ¥å£ç»Ÿä¸€åšäº†å…¨å±€æ‹¦æˆªã€‚ï¼ˆé¡¹ç›®æƒé™ç®¡ç†ä¹Ÿå¯åœ¨axiosæ‹¦æˆªå‡½æ•°é‡Œå®ç°ï¼‰

å¤æ‚çš„Vueé¡¹ç›®æ›´éœ€è¦è‰¯å¥½çš„è§„èŒƒï¼Œæ²¡æœ‰è§„çŸ©ä¸æˆæ–¹åœ†ã€‚=> ä»£ç æ ¼å¼è§„èŒƒï¼Œgitçš„æäº¤æ—¥å¿—æ ¼å¼ => ç¡®ä¿ä»£ç çš„å¯ç»´æŠ¤æ€§
