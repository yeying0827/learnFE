## å¾®å‰ç«¯çš„å·¥å…·ä»‹ç»

**åŸºäº`single-spa`æ¡†æ¶åšçš„æµè§ˆå™¨æ’ä»¶**

### è„šæ‰‹æ¶é¡¹ç›®è‡ªå¸¦çš„å·¥å…·

#### 0. åº”ç”¨è¿è¡Œå‰çš„éªŒè¯ç¯èŠ‚

```shell
# é¦–å…ˆå®‰è£…single-spaè„šæ‰‹æ¶
npx create-single-spa
```

<img src="../img/example-project.png" alt="example project" style="zoom:50%;" />

<img src="../img/example-project2.png" alt="example project2" style="zoom:50%;" />

åœ¨è„šæ‰‹æ¶å®‰è£…å®Œæˆä¹‹åï¼Œåº”ç”¨è¿è¡Œå‰ï¼Œ`single-spa`æœ‰ä¸€å¥—ç‹¬ç«‹çš„æ£€æµ‹æ–¹æ¡ˆï¼Œä¿è¯æˆ‘ä»¬åœ¨è¿è¡Œå‰çš„ç¯å¢ƒæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚

åœ¨æˆ‘ä»¬é€šè¿‡`single-spa`å¯¹`å¾®å‰ç«¯`é¡¹ç›®åœ¨æœ¬åœ°åˆå§‹åŒ–åï¼Œå‘½ä»¤è¡Œä¼šæ˜¾ç¤ºä»¥ä¸Šä¿¡æ¯ï¼ˆä¸Šå›¾çš„ç°è‰²é˜´å½±éƒ¨åˆ†ï¼‰ï¼šç¬¬1ç‚¹å°±æ˜¯æ­£å¸¸å¯åŠ¨é¡¹ç›®çš„æ“ä½œï¼›ç¬¬2ç‚¹æ˜¯ç”¨æ¥æµ‹è¯•æˆ‘ä»¬çš„å¾®å‰ç«¯é¡¹ç›®æ˜¯å¦å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œå½“æ‰“å¼€å…¶ä¸­çš„é“¾æ¥ï¼Œä¼šé‡å®šå‘åˆ°http://single-spa-playground.org/ï¼Œåœ¨è¯¥ç½‘å€ä¸‹å±•ç¤ºè„šæ‰‹æ¶å®‰è£…å¥½çš„å­åº”ç”¨ã€‚

<img src="../img/test-example.png" alt="test exmaple" style="zoom:50%;" />

å³ä¸‹è§’çš„è“è‰²èƒŒæ™¯å›¾æ ‡æ˜¯`playground`çš„`icon`ï¼Œç‚¹å‡»å¯ä»¥çœ‹åˆ°`playground`çš„ç®€ä»‹å’Œå››ä¸ªèœå•åŠŸèƒ½ï¼š

Single-spaåº”ç”¨ã€éªŒè¯single-spaåº”ç”¨ã€`root configuration`ã€stuckï¼ˆç¢°åˆ°çš„é—®é¢˜ï¼‰

#### 1. playgroundç®€ä»‹

`single-spa playground`æ˜¯ä¸€ä¸ªååŠ©ä½ ä½¿ç”¨[`single-spa`](https://single-spa.js.org/)çš„ç½‘ç«™ï¼Œ`single spa`è¿˜æœ‰ä¸€ä¸ªæµè§ˆå™¨æ‰©å±•ç¨‹åºï¼Œä¸¤è€…å¯ä»¥ååŒå¸®åŠ©ä½ è°ƒè¯•single-spaåº”ç”¨ç¨‹åºã€‚

#### 2. å¦‚ä½•æ„å»ºå¾®å‰ç«¯åº”ç”¨

ä¸€ä¸ªsingle-spaåº”ç”¨åœ¨æ™®é€šçš„spaåº”ç”¨åŸºç¡€ä¸Šï¼Œè¿˜å¿…é¡»å’Œå…¶ä»–åº”ç”¨å…±äº«ä¸€ä¸ªHTMLæ–‡ä»¶ã€‚

ä½ å¯ä»¥æ‰‹åŠ¨å»é…ç½®ï¼Œä½†æ˜¯å¼ºçƒˆæ¨èä½¿ç”¨[`create-single-spa`](https://single-spa.js.org/docs/create-single-spa/)è¿™ä¸ªCLIå»åˆ›å»ºé¡¹ç›®ã€‚

ç”±äº`single-spa`åº”ç”¨æ²¡æœ‰è‡ªå·±çš„HTMLæ–‡ä»¶ï¼Œå®ƒä»¬ä¸èƒ½ä½œä¸ºç‹¬ç«‹çš„åº”ç”¨å»è¿è¡Œã€‚ä½†å®ƒä»¬å¯ä»¥ç”Ÿæˆèƒ½å¤Ÿè¢«åŠ¨æ€æ³¨å…¥HTMLæ–‡ä»¶çš„JavaScriptå’Œcssï¼Œplaygroundå…è®¸ä½ è¿™ä¹ˆåšä»¥ä¾¿æµ‹è¯•åº”ç”¨ç¨‹åºï¼Œå…·ä½“æ“ä½œå°±æ˜¯ä¸Šé¢å›¾ä¸­ç°è‰²é˜´å½±éƒ¨åˆ†ä¸­çš„æ­¥éª¤ã€‚

* å¯åŠ¨æœåŠ¡

```shell
$ yarn start --port 8500
yarn run v1.22.10
warning package.json: No license field
$ webpack serve --port 8500
<i> [webpack-dev-server] Project is running at:
<i> [webpack-dev-server] Loopback: http://localhost:8500/
<i> [webpack-dev-server] On Your Network (IPv4): http://10.10.10.173:8500/
<i> [webpack-dev-server] On Your Network (IPv6): http://[fe80::1]:8500/
<i> [webpack-dev-server] Content not from webpack is served from '/Users/ying.ye/CodeProjects/learnFE/learn_microFE/examlpe/public' directory
<i> [webpack-dev-server] 404s will fallback to '/index.html'
asset yy-example.js 275 KiB [emitted] (name: main) 1 related asset
asset index.html 3.05 KiB [emitted]
runtime modules 26.3 KiB 12 modules
modules by path ./node_modules/ 211 KiB
  modules by path ./node_modules/webpack-dev-server/client/ 57.4 KiB 12 modules
  modules by path ./node_modules/webpack/hot/*.js 4.3 KiB 4 modules
  modules by path ./node_modules/html-entities/lib/*.js 81.3 KiB 4 modules
  modules by path ./node_modules/systemjs-webpack-interop/ 3.27 KiB 3 modules
  modules by path ./node_modules/react/ 37.7 KiB
    ./node_modules/react/jsx-runtime.js 214 bytes [built] [code generated]
    ./node_modules/react/cjs/react-jsx-runtime.development.js 37.5 KiB [built] [code generated]
  + 4 modules
modules by path ./src/*.js 714 bytes
  ./src/yy-example.js 534 bytes [built] [code generated]
  ./src/root.component.js 180 bytes [built] [code generated]
external "react" 42 bytes [built] [code generated]
external "react-dom" 42 bytes [built] [code generated]
webpack 5.74.0 compiled successfully in 1138 ms
```

* æŸ¥çœ‹æ•ˆæœ

  è®¿é—®é“¾æ¥http://single-spa-playground.org/playground/instant-test?name=@yy/example&url=8500ï¼Œä¼šé‡å®šå‘åˆ°http://single-spa-playground.org/ï¼Œä¸ºä½ å¯åŠ¨single-spaåº”ç”¨ã€‚

  è¿™æ ·å®ç°äº†ä½ åœ¨æœ¬åœ°ä¸ºsingle-spaåº”ç”¨å¼€å¯ä¸€ä¸ªæœåŠ¡ï¼Œç„¶åè·‘åœ¨ä¸€ä¸ªå·²ç»éƒ¨ç½²çš„åº”ç”¨ä¸Šã€‚

<img src="../img/example-start.png" alt="example start" style="zoom:50%;" />

#### 3. éªŒè¯å¾®å‰ç«¯åº”ç”¨

éªŒè¯å½“å‰æ„å»ºçš„`single-spa`åº”ç”¨æ˜¯å¦å¯ä»¥æ­£å¸¸è¿è¡Œçš„æ“ä½œã€‚

![validate app](../img/validate-app.png)

ç‚¹å‡»æŒ‰é’®åä¼šæ˜¾ç¤ºæ£€æµ‹çš„7ä¸ªç‚¹ï¼š

<img src="../img/validate-steps.png" alt="validate steps" style="zoom:50%;" />

* æ˜¯å¦å¯ä»¥é€šè¿‡URLä¸‹è½½åº”ç”¨
* æ£€æŸ¥æ˜¯å¦æœ‰å…±äº«çš„ä¾èµ–é¡¹
* åº”ç”¨ç¨‹åºä»£ç æ‰§è¡Œæ—¶æ— JavaScripté”™è¯¯
* single-spaçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•è¢«æ­£ç¡®å¯¼å‡º
* åº”ç”¨ç¨‹åºå¯ä»¥æŒ‚è½½åˆ°DOM
* ç”Ÿå‘½å‘¨æœŸçš„å¸è½½æ–¹æ³•å¯ä»¥æ­£å¸¸æ‰§è¡Œ
* å¯ä»¥é‡æ–°æŒ‚è½½åº”ç”¨ç¨‹åº

ç‚¹å‡»`start test`æŒ‰é’®ï¼Œå¾—åˆ°æ£€æµ‹ç»“æœï¼š

<img src="../img/validate-pass.png" alt="validate pass" style="zoom:50%;" />

#### 4. root configuration

åœ¨single-spaä¸­ï¼Œå¯¹äºæ‰€æœ‰çš„åº”ç”¨åªæœ‰ä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œæˆ‘ä»¬æŠŠå®ƒç§°ä½œ`single-spa root config`ã€‚åªæœ‰ä¸€ä¸ªhtmlæ–‡ä»¶è¿™ä¸€ç‚¹å°±æ˜¯single-spaè¿™ä¸ªåå­—çš„å®é™…ç”±æ¥ã€‚root configå°±æ˜¯è¿è¡Œä¸€ä¸ªå¾®åº”ç”¨çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚

```shell
## ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥ä¸ºä½ åˆ›å»ºä¸€ä¸ªåŒ…å«root-configçš„single-spaé¡¹ç›®
npx create-single-spa --module-type root-config

$ npx create-single-spa --module-type root-config
npx: 390 å®‰è£…æˆåŠŸï¼Œç”¨æ—¶ 41.666 ç§’
? Directory for new project example1
? Which package manager do you want to use? yarn
? Will this project use Typescript? No
? Would you like to use single-spa Layout Engine No
? Organization name (can use letters, numbers, dash or underscore) yy
hint: Using 'master' as the name for the initial branch. This default branch name
hint: is subject to change. To configure the initial branch name to use in all
hint: of your new repositories, which will suppress this warning, call:
hint: 
hint: 	git config --global init.defaultBranch <name>
hint: 
hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
hint: 'development'. The just-created branch can be renamed via this command:
hint: 
hint: 	git branch -m <name>
Initialized empty Git repository in /Users/ying.ye/CodeProjects/learnFE/learn_microFE/example1/.git/

Initialized git repository

   create example1/package.json
   create example1/babel.config.json
   create example1/.gitignore
   create example1/.husky/pre-commit
   create example1/.eslintrc
   create example1/.prettierignore
   create example1/webpack.config.js
   create example1/src/yy-root-config.js
   create example1/src/index.ejs

No change to package.json was detected. No package manager install will be executed.


I'm all done. Running yarn install for you to install the required dependencies. If this fails, try running the command yourself.


yarn install v1.22.10
warning package.json: No license field
info No lockfile found.
warning @yy/root-config: No license field
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...
success Saved lockfile.
$ husky install
husky - Git hooks installed
âœ¨  Done in 129.78s.
Project setup complete!
Run 'yarn start' to boot up your single-spa root config
```

è¿™ä¸ªåˆ›å»ºå‡ºæ¥çš„é¡¹ç›®åŒ…å«äº†åŸºæœ¬çš„import mapé…ç½®ã€‚

import mapsæ˜¯ä¸€ä»½è§„èŒƒï¼Œç”¨æ¥æ§åˆ¶å“ªäº›URLéœ€è¦å»å“ªå„¿åŠ è½½JavaScriptåŒ…ã€‚systemjså°±æ˜¯ç”¨äºè¿™ä¸ªè§„èŒƒçš„ä¸€ä¸ªnpmåº“ï¼Œç”¨äºå…¼å®¹ä¸æ”¯æŒimport mapsçš„æµè§ˆå™¨ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡`systemjs`è®¾ç½®æ¯ä¸€ä¸ªå¾®åº”ç”¨çš„å¯¼å…¥é¡¹ã€‚

```ejs
<!-- åœ¨src/index.ejsä¸­å¯ä»¥çœ‹åˆ°å‡ æ®µé…ç½® -->
<script type="systemjs-importmap">
    {
      "imports": {
        "single-spa": "https://cdn.jsdelivr.net/npm/single-spa@5.9.0/lib/system/single-spa.min.js"
      }
    }
</script>

<% if (isLocal) { %>
  <script type="systemjs-importmap">
    {
      "imports": {
        "@yy/root-config": "//localhost:9000/yy-root-config.js"
      }
    }
  </script>
<% } %>

<!-- æˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°ejsæ–‡ä»¶ä¸­å¯¼å…¥äº†å…¥å£æ–‡ä»¶ -->
<script>
  System.import('@yy/root-config');
</script>
```

ä»…ä»…é…ç½®äº†å¯¼å…¥æ˜ å°„è¿˜ä¸å¤Ÿï¼ŒæœåŠ¡å¯åŠ¨åæˆ‘ä»¬åªèƒ½çœ‹åˆ°ç©ºç™½é¡µé¢ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é€šè¿‡`single-spa`æ³¨å†Œæ¯ä¸€ä¸ªå¾®åº”ç”¨ï¼ŒæŠŠä¸‹é¢çš„å†…å®¹æ·»åŠ è‡³root-configçš„å…¥å£æ–‡ä»¶

```js
// åœ¨src/yy-root-config.jsä¸­å¯ä»¥çœ‹åˆ°é»˜è®¤çš„ä¸€äº›é…ç½®
import { registerApplication, start } from "single-spa";

registerApplication({
  name: "@single-spa/welcome",
  app: () =>
    System.import(
      "https://unpkg.com/single-spa-welcome/dist/single-spa-welcome.js"
    ),
  activeWhen: ["/"],
});

// æˆ‘ä»¬éœ€è¦åœ¨start()æ–¹æ³•è°ƒç”¨ä¹‹å‰ç»§ç»­è°ƒç”¨registerApplicationæ³¨å†Œæˆ‘ä»¬è‡ªå·±çš„å¾®åº”ç”¨ï¼Œæ¯”å¦‚
// registerApplication({
//   name: "@yy/navbar",
//   app: () => System.import("@yy/navbar"),
//   activeWhen: ["/"]
// });

start({
  urlRerouteOnly: true,
});
```

è¿™æ ·å°±å¯ä»¥ä¸²è”æ¯ä¸€ä¸ªå¾®åº”ç”¨ï¼Œå®ç°ä¸€ä¸ªå®Œæ•´åº”ç”¨çš„æ•ˆæœï¼Œ`yarn start`çœ‹ä¸€ä¸‹æ•ˆæœï¼š

```shell
yarn start

## é»˜è®¤æ‰“å¼€9000ç«¯å£
$ yarn start            
yarn run v1.22.10
warning package.json: No license field
$ webpack serve --port 9000 --env isLocal
<i> [webpack-dev-server] Project is running at:
<i> [webpack-dev-server] Loopback: http://localhost:9000/
<i> [webpack-dev-server] On Your Network (IPv4): http://10.10.10.137:9000/
<i> [webpack-dev-server] On Your Network (IPv6): http://[fe80::1]:9000/
<i> [webpack-dev-server] Content not from webpack is served from '/Users/ying.ye/CodeProjects/learnFE/learn_microFE/example1/public' directory
<i> [webpack-dev-server] 404s will fallback to '/index.html'
asset yy-root-config.js 243 KiB [emitted] (name: main) 1 related asset
asset index.html 3.46 KiB [emitted]
runtime modules 26.3 KiB 12 modules
modules by path ./node_modules/ 181 KiB
  modules by path ./node_modules/webpack-dev-server/client/ 57.4 KiB 12 modules
  modules by path ./node_modules/webpack/hot/*.js 4.3 KiB 4 modules
  modules by path ./node_modules/html-entities/lib/*.js 81.3 KiB 4 modules
  modules by path ./node_modules/systemjs-webpack-interop/ 3.27 KiB
    ./node_modules/systemjs-webpack-interop/auto-public-path/1.js 89 bytes [built] [code generated]
    + 2 modules
  ./node_modules/single-spa-layout/dist/esm/single-spa-layout.min.js 15.7 KiB [built] [code generated]
  ./node_modules/ansi-html-community/index.js 4.16 KiB [built] [code generated]
  ./node_modules/events/events.js 14.5 KiB [built] [code generated]
modules by path ./src/ 1.13 KiB
  ./src/yy-root-config.js 606 bytes [built] [code generated]
  ./src/microfrontend-layout.html 546 bytes [built] [code generated]
external "single-spa" 42 bytes [built] [code generated]
webpack 5.74.0 compiled successfully in 1099 ms
```

è®¿é—®`9000ç«¯å£`ï¼Œä¼šæ‰“å¼€ä¸€ä¸ªé»˜è®¤æ¬¢è¿ç•Œé¢ï¼š

<img src="../img/root-config.png" alt="root config" style="zoom:50%;" />

é»˜è®¤æ‰“å¼€çš„ç•Œé¢ä¸`yy-root-config.js`ä¸­æ³¨å†Œçš„å¾®åº”ç”¨æœ‰å…³ã€‚

æŸ¥çœ‹srcç›®å½•ä¸‹çš„å†…å®¹å’Œä¹‹å‰ä¸ä¸€æ ·ï¼Œå½“ä¸å¸¦å‚æ•°åˆ›å»ºsingle-spa é¡¹ç›®æ—¶ï¼Œsrcç›®å½•ä¸‹çš„ä¸‰ä¸ªæ–‡ä»¶æ˜¯ï¼š`root.component.js`ã€`root.component.test.js`ã€`yy-example.js`ã€‚

ä½¿ç”¨å‚æ•°åˆ›å»ºé¡¹ç›®åï¼Œsrcç›®å½•ä¸‹çš„æ–‡ä»¶å˜æˆäº†ï¼š`index.ejs`ã€`yy-root-config.js`ã€‚å¹¶ä¸”ä¸¤æ¬¡åˆ›å»ºçš„webpack.config.jsä¸­çš„å†…å®¹ä¹Ÿä¸åŒï¼Œå¤šäº†`html-webpack-plugin`çš„é…ç½®ã€‚

æ–°å»ºçš„é¡¹ç›®å¯åŠ¨åæ‰“å¼€çš„å³ä¸‹è§’ä¹Ÿæ²¡æœ‰å›¾æ ‡ã€‚

#### 5. Stuckï¼Ÿ

ä½¿ç”¨ä¸­ç¢°åˆ°é—®é¢˜æ—¶ï¼Œå¯ä»¥å‚è€ƒçš„å¤„ç†æ–¹å¼ï¼š[æäº¤github issue](https://github.com/single-spa/single-spa-playground/issues/new?body=%0A%23%23%20Data%20dump%0A%0AApplications%3A%0A%60%60%60json%0A%7B%0A%20%20%22name%22%3A%20%22%40yy%2Fexample%22%2C%0A%20%20%22pathPrefix%22%3A%20%22%2F%22%2C%0A%20%20%22useNativeModules%22%3A%20false%0A%7D%0A%60%60%60%0A%0AImport%20map%3A%0A%60%60%60json%0A%7B%0A%20%20%22imports%22%3A%20%7B%0A%20%20%20%20%22%40yy%2Fexample%22%3A%20%22%2F%2Flocalhost%3A8500%2Fyy-example.js%22%0A%20%20%7D%2C%0A%20%20%22scopes%22%3A%20%7B%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Description%0A)æˆ–è€…[åŠ å…¥single-spaå·¥ä½œåŒºè®¨è®º](https://join.slack.com/t/single-spa/shared_invite/enQtODAwNTIyMzc4OTE1LWUxMTUwY2M1MTY0ZGMzOTUzMGNkMzI1NzRiYzYwOWM1MTEzZDM1NDAyNWM3ZmViOTAzZThkMDcwMWZmNTFmMWQ)

åœ¨æäº¤é—®é¢˜å‰ï¼Œå¯ä»¥å…ˆåœ¨issueä¸­è¿›è¡ŒæŸ¥è¯¢



### æµè§ˆå™¨æ’ä»¶

Chromeå•†åº—æ‰“ä¸å¼€ï¼Œéšä¾¿ä¸‹è½½ä¸€ä¸ªhttps://www.chajianxw.com/developer/36424.html

åŠŸèƒ½ï¼š

* åˆ—å‡ºæ‰€æœ‰æ³¨å†Œçš„åº”ç”¨ï¼ˆæŒ‰ç…§æŒ‚è½½é¡ºåºï¼‰
* å±•ç¤ºæ‰€æœ‰åº”ç”¨çš„çŠ¶æ€
* å¼ºåˆ¶æŒ‚è½½ã€å¸è½½æŸä¸ªåº”ç”¨
* å±•ç¤ºåº”ç”¨è¦†ç›–çš„è®°å½•ã€‚æŸ¥çœ‹å¦‚ä½•é…ç½®è¦†ç›–è®°å½•ï¼Œå¯ç”¨è¯¥åŠŸèƒ½
* æä¾›äº†ä¸€ä¸ªæ·»åŠ é‡å†™å¯¼å…¥æ˜ å°„ï¼ˆimport-mapsï¼‰çš„æ¥å£

<img src="../img/chrome-plugin.png" alt="chrome plugin" style="zoom:50%;" />

#### åº”ç”¨åˆ—è¡¨

åº”ç”¨åˆ—è¡¨å±•ç¤ºäº†åº”ç”¨çš„åç§°ã€æŒ‚è½½çŠ¶æ€ç­‰ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°é»˜è®¤æƒ…å†µä¸‹åªæ³¨å†Œäº†ä¸€ä¸ªæ¬¢è¿çš„å¾®åº”ç”¨ï¼Œé¼ æ ‡æ‚¬åœåœ¨ä¸€ä¸ªåº”ç”¨ä¸Šæ—¶ï¼Œä¼šåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºè¿™ä¸ªåº”ç”¨çš„ä½ç½®ï¼Œç±»ä¼¼äºå®¡æŸ¥å…ƒç´ ã€‚å¯ä»¥å¯¹åº”ç”¨åˆ—è¡¨ä¸­çš„å¾®åº”ç”¨åšä¸€äº›æ“ä½œï¼Œæ¯”å¦‚å¸è½½ã€é‡ç½®å’Œè¦†ç›–

#### é…ç½®åº”ç”¨è¦†ç›–

ä¸ºäº†æ·»åŠ åº”ç”¨è¦†ç›–ï¼Œéœ€è¦æ‰¾åˆ°å¯¼å‡ºç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ˆå¦‚bootstrapã€mountã€unmountï¼‰çš„æ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªå¯¼å‡ºå¯¹è±¡æ ¼å¼å¦‚ä¸‹ï¼š

```js
// å¸¸é‡çš„åå­—å¿…é¡»æ˜¯devtools
export const devtools = {
  overlays: {
    // selectorsæ˜¯å¿…é€‰é…ç½®
    // è¯¥é…ç½®æ˜¯cssé€‰æ‹©å™¨æ„æˆçš„æ•°ç»„ï¼Œåœ¨æ¯ä¸ªåº”ç”¨çš„æœ€å¤–å±‚ï¼Œä»¥è¯¥é€‰æ‹©å™¨ä½œä¸ºæ ‡è¯†
    // ä½ å¯ä»¥è®¾ç½®å¤šä¸ªæ ‡è¯†ï¼Œç±»ä¼¼å¤šä¸ªparcelæˆ–â€™ä¸åŒå®¹å™¨åº”å¯¹ä¸åŒè§†å›¾â€˜çš„ç”¨æ³•
    selectors: [
      '#my-app',
      '.some-container .app'
    ],
    // å¯é€‰é…ç½®ï¼Œ
    // è¿™äº›é€‰é¡¹ç”¨æ¥é…ç½®â€™è¦†ç›–â€˜çš„æ ·å¼å’Œä¸€äº›æ“ä½œ
    options: {
      width: '100%',
      height: '100%',
      zIndex: 40,
      position: 'absolute',
      top: 0,
      left: 0,
      color: '#000',
      background: '#000',
      textBlocks: [
        // ä½ å¯ä»¥ç»™â€™è¦†ç›–â€˜æ·»åŠ é¢å¤–çš„æ–‡æœ¬ï¼Œä¾‹å¦‚ï¼Œä½ å¯ä»¥æ·»åŠ è¿™ä¸ªé…ç½®çš„å¼€å‘äººå‘˜çš„åå­—
        // è¿™ä¸ªæ•°ç»„ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²éƒ½ä¼šåœ¨ä¸€ä¸ªæ–°çš„divä¸­
        // ä¾‹å¦‚ï¼šâ€™blue squadâ€˜ï¼Œâ€™is awesomeâ€˜ä¼šè¢«è§£ææˆ
        // <div>blue squad</div><div>is awesome</div>
      ]
    }
  }
};
```

#### import-map-override

å¦‚æœä½ ä½¿ç”¨äº†import-mapsï¼Œå½“ä½ ä½¿ç”¨äº†[import-map-override](https://github.com/joeldenning/import-map-overrides)è¿™ä¸ªåº“ï¼Œsingle-spaæ’ä»¶æä¾›ä¸€ä¸ªæ¥å£å…è®¸ä½ æ·»åŠ import-map overrideã€‚

#### æ“ä½œ

å½“ä¸‹è½½å¹¶å®‰è£…æ’ä»¶ä»¥åï¼Œé€šè¿‡`localStorage.setItem('devtools', true)`æ¿€æ´»æ§åˆ¶å°ï¼Œå¹¶åˆ·æ–°é¡µé¢åï¼Œæ­¤æ—¶ï¼Œå±å¹•å³ä¸‹è§’ä¼šå‡ºç°ä¸€ä¸ªæ©˜è‰²èƒŒæ™¯çš„å›¾æ ‡ï¼Œç‚¹å‡»å¯ä»¥æ‰“å¼€ä¸€ä¸ªæ ‡é¢˜ä¸º'import map overrides'çš„é¢æ¿ã€‚

```ejs
<!-- ä¸src/index.ejsä¸­çš„è¿™æ®µå†…å®¹æœ‰å…³ï¼Œå¦‚æœdevtoolså¼€å¯ï¼Œå°±ä¼šå±•ç¤ºè¿™ä¸ªç»„ä»¶ -->
<import-map-overrides-full show-when-local-storage="devtools" dev-libs></import-map-overrides-full>
```

<img src="../img/add-console.png" alt="add console" style="zoom:50%;" />

ç‚¹å‡»`add new module`æŒ‰é’®å¯ä»¥æ·»åŠ æ–°çš„å¾®åº”ç”¨ã€‚

å½“å¾®åº”ç”¨é…ç½®æ­£ç¡®çš„æ—¶å€™ï¼Œå°±å¯ä»¥æ­£å¸¸è®¿é—®æˆ‘ä»¬çš„å¾®åº”ç”¨äº†ã€‚
